"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/upload",{

/***/ "./components/Upload.js":
/*!******************************!*\
  !*** ./components/Upload.js ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dropzone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dropzone */ \"./node_modules/react-dropzone/dist/es/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var _supabaseClient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../supabaseClient */ \"./supabaseClient.js\");\n\nvar _s = $RefreshSig$();\n\n\n\n\nconst API_URL = \"http://localhost:3001\" || 0;\nconst Upload = ()=>{\n    _s();\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [progress, setProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [assetId, setAssetId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>localStorage.getItem(\"currentAssetId\"));\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!assetId || !loading) return;\n        const validateAndPoll = async ()=>{\n            const { data: { session } } = await _supabaseClient__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.getSession();\n            if (!session) {\n                console.warn(\"User session expired, skipping polling\");\n                localStorage.removeItem(\"currentAssetId\");\n                setAssetId(null);\n                setLoading(false);\n                setStatus(\"Please log in to continue.\");\n                return;\n            }\n            const interval = setInterval(async ()=>{\n                try {\n                    const res = await axios__WEBPACK_IMPORTED_MODULE_4__[\"default\"].get(\"\".concat(API_URL, \"/api/cesium/status/\").concat(assetId));\n                    const { status: tilingStatus, percentComplete } = res.data;\n                    if (!tilingStatus) throw new Error(\"No tiling status returned\");\n                    setStatus(\"\\uD83D\\uDD04 Tiling status: \".concat(tilingStatus));\n                    if (percentComplete) setProgress(percentComplete);\n                    if (tilingStatus === \"COMPLETE\") {\n                        clearInterval(interval);\n                        setStatus(\"✅ Tiling complete! Launching viewer...\");\n                        localStorage.removeItem(\"currentAssetId\");\n                        setTimeout(()=>{\n                            window.location.href = \"/viewer-standalone?assetId=\".concat(assetId);\n                        }, 1000);\n                    }\n                    if (tilingStatus === \"FAILED\") {\n                        clearInterval(interval);\n                        localStorage.removeItem(\"currentAssetId\");\n                        setStatus(\"❌ Tiling failed.\");\n                        setLoading(false);\n                    }\n                } catch (err) {\n                    console.error(\"Polling error:\", err);\n                    clearInterval(interval);\n                    localStorage.removeItem(\"currentAssetId\");\n                    setStatus(\"❌ Error checking tiling status.\");\n                    setLoading(false);\n                }\n            }, 5000);\n            return ()=>clearInterval(interval);\n        };\n        validateAndPoll();\n    }, [\n        assetId,\n        loading\n    ]);\n    const onDrop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (acceptedFiles)=>{\n        const file = acceptedFiles[0];\n        if (!file) return;\n        const { data: { session } } = await _supabaseClient__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.getSession();\n        if (!session) {\n            setStatus(\"❌ You must be logged in to upload.\");\n            return;\n        }\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        formData.append(\"name\", file.name);\n        try {\n            setLoading(true);\n            setStatus(\"⬆️ Uploading \".concat(file.name, \"...\"));\n            const res = await axios__WEBPACK_IMPORTED_MODULE_4__[\"default\"].post(\"\".concat(API_URL, \"/api/cesium/upload\"), formData, {\n                headers: {\n                    \"Content-Type\": \"multipart/form-data\"\n                }\n            });\n            const { assetId: newAssetId } = res.data;\n            setAssetId(newAssetId);\n            localStorage.setItem(\"currentAssetId\", newAssetId);\n            setStatus(\"✅ Upload complete. Tiling started...\");\n        } catch (err) {\n            console.error(\"Upload error:\", err);\n            setStatus(\"❌ Upload failed.\");\n            setLoading(false);\n        }\n    }, []);\n    const { getRootProps, getInputProps, isDragActive } = (0,react_dropzone__WEBPACK_IMPORTED_MODULE_2__.useDropzone)({\n        onDrop,\n        accept: {\n            \"application/octet-stream\": [\n                \".las\",\n                \".laz\"\n            ]\n        },\n        maxFiles: 1\n    });\n    const dropzoneStyle = {\n        border: \"2px dashed\",\n        borderColor: isDragActive ? \"#3b82f6\" : \"#ccc\",\n        borderRadius: \"0.5rem\",\n        padding: \"2rem\",\n        textAlign: \"center\",\n        backgroundColor: isDragActive ? \"#eef6ff\" : \"#fff\",\n        transition: \"0.2s\"\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col items-center w-full\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ...getRootProps(),\n                style: dropzoneStyle,\n                className: \"cursor-pointer w-full max-w-xl\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        ...getInputProps()\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Tom Jennings\\\\lidar-viewer-poc\\\\frontend\\\\components\\\\Upload.js\",\n                        lineNumber: 120,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-600\",\n                        children: isDragActive ? \"Drop your LiDAR file here...\" : \"Drag a .las or .laz file here or click to upload\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Tom Jennings\\\\lidar-viewer-poc\\\\frontend\\\\components\\\\Upload.js\",\n                        lineNumber: 121,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Tom Jennings\\\\lidar-viewer-poc\\\\frontend\\\\components\\\\Upload.js\",\n                lineNumber: 119,\n                columnNumber: 7\n            }, undefined),\n            status && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-4 w-full max-w-xl text-center\",\n                children: [\n                    loading && progress !== null && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-full bg-gray-200 h-2 rounded mb-2 overflow-hidden\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-blue-500 h-2\",\n                            style: {\n                                width: \"\".concat(progress, \"%\"),\n                                transition: \"width 0.5s\"\n                            }\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Tom Jennings\\\\lidar-viewer-poc\\\\frontend\\\\components\\\\Upload.js\",\n                            lineNumber: 132,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Tom Jennings\\\\lidar-viewer-poc\\\\frontend\\\\components\\\\Upload.js\",\n                        lineNumber: 131,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-gray-700\",\n                        children: status\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Tom Jennings\\\\lidar-viewer-poc\\\\frontend\\\\components\\\\Upload.js\",\n                        lineNumber: 138,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Tom Jennings\\\\lidar-viewer-poc\\\\frontend\\\\components\\\\Upload.js\",\n                lineNumber: 129,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Tom Jennings\\\\lidar-viewer-poc\\\\frontend\\\\components\\\\Upload.js\",\n        lineNumber: 118,\n        columnNumber: 5\n    }, undefined);\n};\n_s(Upload, \"OzFAlB/pY39QSYA88z2HRe07m60=\", false, function() {\n    return [\n        react_dropzone__WEBPACK_IMPORTED_MODULE_2__.useDropzone\n    ];\n});\n_c = Upload;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Upload);\nvar _c;\n$RefreshReg$(_c, \"Upload\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dklNRDs7UUE2RmtEUCx1REFBV0E7OztLQTdGN0RPO0FBeUlOLCtEQUFlQSxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvVXBsb2FkLmpzPzc3MDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IHVzZURyb3B6b25lIH0gZnJvbSBcInJlYWN0LWRyb3B6b25lXCI7XHJcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcclxuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tIFwiLi4vc3VwYWJhc2VDbGllbnRcIjtcclxuXHJcbmNvbnN0IEFQSV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8IFwiaHR0cDovL2xvY2FsaG9zdDozMDAxXCI7XHJcblxyXG5jb25zdCBVcGxvYWQgPSAoKSA9PiB7XHJcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlKFwiXCIpO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbcHJvZ3Jlc3MsIHNldFByb2dyZXNzXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFthc3NldElkLCBzZXRBc3NldElkXSA9IHVzZVN0YXRlKCgpID0+IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudEFzc2V0SWRcIikpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFhc3NldElkIHx8ICFsb2FkaW5nKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgdmFsaWRhdGVBbmRQb2xsID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcclxuICAgICAgaWYgKCFzZXNzaW9uKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKFwiVXNlciBzZXNzaW9uIGV4cGlyZWQsIHNraXBwaW5nIHBvbGxpbmdcIik7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjdXJyZW50QXNzZXRJZFwiKTtcclxuICAgICAgICBzZXRBc3NldElkKG51bGwpO1xyXG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIHNldFN0YXR1cyhcIlBsZWFzZSBsb2cgaW4gdG8gY29udGludWUuXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldChgJHtBUElfVVJMfS9hcGkvY2VzaXVtL3N0YXR1cy8ke2Fzc2V0SWR9YCk7XHJcbiAgICAgICAgICBjb25zdCB7IHN0YXR1czogdGlsaW5nU3RhdHVzLCBwZXJjZW50Q29tcGxldGUgfSA9IHJlcy5kYXRhO1xyXG5cclxuICAgICAgICAgIGlmICghdGlsaW5nU3RhdHVzKSB0aHJvdyBuZXcgRXJyb3IoXCJObyB0aWxpbmcgc3RhdHVzIHJldHVybmVkXCIpO1xyXG5cclxuICAgICAgICAgIHNldFN0YXR1cyhg8J+UhCBUaWxpbmcgc3RhdHVzOiAke3RpbGluZ1N0YXR1c31gKTtcclxuICAgICAgICAgIGlmIChwZXJjZW50Q29tcGxldGUpIHNldFByb2dyZXNzKHBlcmNlbnRDb21wbGV0ZSk7XHJcblxyXG4gICAgICAgICAgaWYgKHRpbGluZ1N0YXR1cyA9PT0gXCJDT01QTEVURVwiKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICBzZXRTdGF0dXMoXCLinIUgVGlsaW5nIGNvbXBsZXRlISBMYXVuY2hpbmcgdmlld2VyLi4uXCIpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRBc3NldElkXCIpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGAvdmlld2VyLXN0YW5kYWxvbmU/YXNzZXRJZD0ke2Fzc2V0SWR9YDtcclxuICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHRpbGluZ1N0YXR1cyA9PT0gXCJGQUlMRURcIikge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjdXJyZW50QXNzZXRJZFwiKTtcclxuICAgICAgICAgICAgc2V0U3RhdHVzKFwi4p2MIFRpbGluZyBmYWlsZWQuXCIpO1xyXG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJQb2xsaW5nIGVycm9yOlwiLCBlcnIpO1xyXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRBc3NldElkXCIpO1xyXG4gICAgICAgICAgc2V0U3RhdHVzKFwi4p2MIEVycm9yIGNoZWNraW5nIHRpbGluZyBzdGF0dXMuXCIpO1xyXG4gICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCA1MDAwKTtcclxuXHJcbiAgICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFsaWRhdGVBbmRQb2xsKCk7XHJcbiAgfSwgW2Fzc2V0SWQsIGxvYWRpbmddKTtcclxuXHJcbiAgY29uc3Qgb25Ecm9wID0gdXNlQ2FsbGJhY2soYXN5bmMgKGFjY2VwdGVkRmlsZXMpID0+IHtcclxuICAgIGNvbnN0IGZpbGUgPSBhY2NlcHRlZEZpbGVzWzBdO1xyXG4gICAgaWYgKCFmaWxlKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XHJcbiAgICBpZiAoIXNlc3Npb24pIHtcclxuICAgICAgc2V0U3RhdHVzKFwi4p2MIFlvdSBtdXN0IGJlIGxvZ2dlZCBpbiB0byB1cGxvYWQuXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZChcImZpbGVcIiwgZmlsZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJuYW1lXCIsIGZpbGUubmFtZSk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgc2V0U3RhdHVzKGDirIbvuI8gVXBsb2FkaW5nICR7ZmlsZS5uYW1lfS4uLmApO1xyXG5cclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdChgJHtBUElfVVJMfS9hcGkvY2VzaXVtL3VwbG9hZGAsIGZvcm1EYXRhLCB7XHJcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcIm11bHRpcGFydC9mb3JtLWRhdGFcIiB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHsgYXNzZXRJZDogbmV3QXNzZXRJZCB9ID0gcmVzLmRhdGE7XHJcbiAgICAgIHNldEFzc2V0SWQobmV3QXNzZXRJZCk7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudEFzc2V0SWRcIiwgbmV3QXNzZXRJZCk7XHJcbiAgICAgIHNldFN0YXR1cyhcIuKchSBVcGxvYWQgY29tcGxldGUuIFRpbGluZyBzdGFydGVkLi4uXCIpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJVcGxvYWQgZXJyb3I6XCIsIGVycik7XHJcbiAgICAgIHNldFN0YXR1cyhcIuKdjCBVcGxvYWQgZmFpbGVkLlwiKTtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCB7IGdldFJvb3RQcm9wcywgZ2V0SW5wdXRQcm9wcywgaXNEcmFnQWN0aXZlIH0gPSB1c2VEcm9wem9uZSh7XHJcbiAgICBvbkRyb3AsXHJcbiAgICBhY2NlcHQ6IHsgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIjogW1wiLmxhc1wiLCBcIi5sYXpcIl0gfSxcclxuICAgIG1heEZpbGVzOiAxLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBkcm9wem9uZVN0eWxlID0ge1xyXG4gICAgYm9yZGVyOiBcIjJweCBkYXNoZWRcIixcclxuICAgIGJvcmRlckNvbG9yOiBpc0RyYWdBY3RpdmUgPyBcIiMzYjgyZjZcIiA6IFwiI2NjY1wiLFxyXG4gICAgYm9yZGVyUmFkaXVzOiBcIjAuNXJlbVwiLFxyXG4gICAgcGFkZGluZzogXCIycmVtXCIsXHJcbiAgICB0ZXh0QWxpZ246IFwiY2VudGVyXCIsXHJcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IGlzRHJhZ0FjdGl2ZSA/IFwiI2VlZjZmZlwiIDogXCIjZmZmXCIsXHJcbiAgICB0cmFuc2l0aW9uOiBcIjAuMnNcIixcclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciB3LWZ1bGxcIj5cclxuICAgICAgPGRpdiB7Li4uZ2V0Um9vdFByb3BzKCl9IHN0eWxlPXtkcm9wem9uZVN0eWxlfSBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciB3LWZ1bGwgbWF4LXcteGxcIj5cclxuICAgICAgICA8aW5wdXQgey4uLmdldElucHV0UHJvcHMoKX0gLz5cclxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwXCI+XHJcbiAgICAgICAgICB7aXNEcmFnQWN0aXZlXHJcbiAgICAgICAgICAgID8gXCJEcm9wIHlvdXIgTGlEQVIgZmlsZSBoZXJlLi4uXCJcclxuICAgICAgICAgICAgOiBcIkRyYWcgYSAubGFzIG9yIC5sYXogZmlsZSBoZXJlIG9yIGNsaWNrIHRvIHVwbG9hZFwifVxyXG4gICAgICAgIDwvcD5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7c3RhdHVzICYmIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgdy1mdWxsIG1heC13LXhsIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICB7bG9hZGluZyAmJiBwcm9ncmVzcyAhPT0gbnVsbCAmJiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWdyYXktMjAwIGgtMiByb3VuZGVkIG1iLTIgb3ZlcmZsb3ctaGlkZGVuXCI+XHJcbiAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctYmx1ZS01MDAgaC0yXCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgJHtwcm9ncmVzc30lYCwgdHJhbnNpdGlvbjogXCJ3aWR0aCAwLjVzXCIgfX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS03MDBcIj57c3RhdHVzfTwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVcGxvYWQ7XHJcbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VEcm9wem9uZSIsImF4aW9zIiwic3VwYWJhc2UiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJVcGxvYWQiLCJzdGF0dXMiLCJzZXRTdGF0dXMiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsInByb2dyZXNzIiwic2V0UHJvZ3Jlc3MiLCJhc3NldElkIiwic2V0QXNzZXRJZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJ2YWxpZGF0ZUFuZFBvbGwiLCJkYXRhIiwic2Vzc2lvbiIsImF1dGgiLCJnZXRTZXNzaW9uIiwiY29uc29sZSIsIndhcm4iLCJyZW1vdmVJdGVtIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInJlcyIsImdldCIsInRpbGluZ1N0YXR1cyIsInBlcmNlbnRDb21wbGV0ZSIsIkVycm9yIiwiY2xlYXJJbnRlcnZhbCIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJlcnIiLCJlcnJvciIsIm9uRHJvcCIsImFjY2VwdGVkRmlsZXMiLCJmaWxlIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsIm5hbWUiLCJwb3N0IiwiaGVhZGVycyIsIm5ld0Fzc2V0SWQiLCJzZXRJdGVtIiwiZ2V0Um9vdFByb3BzIiwiZ2V0SW5wdXRQcm9wcyIsImlzRHJhZ0FjdGl2ZSIsImFjY2VwdCIsIm1heEZpbGVzIiwiZHJvcHpvbmVTdHlsZSIsImJvcmRlciIsImJvcmRlckNvbG9yIiwiYm9yZGVyUmFkaXVzIiwicGFkZGluZyIsInRleHRBbGlnbiIsImJhY2tncm91bmRDb2xvciIsInRyYW5zaXRpb24iLCJkaXYiLCJjbGFzc05hbWUiLCJzdHlsZSIsImlucHV0IiwicCIsIndpZHRoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/Upload.js\n"));

/***/ })

});